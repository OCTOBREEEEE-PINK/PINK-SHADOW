#!/bin/bash

echo "üîß Test du chat frontend"
echo "======================="

echo "üìã Instructions de test pour le frontend..."

echo ""
echo "1Ô∏è‚É£ D√©marrer le frontend:"
echo "   cd frontend/Rosa && npm run dev"
echo "   Ouvrir http://localhost:5175"

echo ""
echo "2Ô∏è‚É£ Test avec 5 joueurs:"
echo "   - Ouvrir 5 onglets: http://localhost:5175"
echo "   - S'inscrire avec 5 noms diff√©rents:"
echo "     ‚Ä¢ Joueur1"
echo "     ‚Ä¢ Joueur2" 
echo "     ‚Ä¢ Joueur3"
echo "     ‚Ä¢ Joueur4"
echo "     ‚Ä¢ Joueur5"

echo ""
echo "3Ô∏è‚É£ V√©rifications √† faire:"
echo "   - ‚úÖ Tous les joueurs apparaissent dans la liste d'attente"
echo "   - ‚úÖ Quand 5 joueurs sont connect√©s, redirection automatique"
echo "   - ‚úÖ Dans gamepuzzle, le chat affiche 5 joueurs connect√©s"
echo "   - ‚úÖ Tous les joueurs peuvent envoyer des messages"
echo "   - ‚úÖ Tous les joueurs re√ßoivent les messages des autres"

echo ""
echo "4Ô∏è‚É£ Logs √† surveiller dans la console:"
echo "   Backend:"
echo "   - 'üöÄ Mission d√©marr√©e pour la session DEFAULT avec 5 joueurs'"
echo "   - 'INFO: WebSocket /ws/chat/DEFAULT?pseudo=... [accepted]'"
echo ""
echo "   Frontend:"
echo "   - 'üë• Joueurs connect√©s dans gamepuzzle: [...]'"
echo "   - 'üòä √âmojis des joueurs dans gamepuzzle: {...}'"
echo "   - 'WebSocket connect√© !'"
echo "   - 'Message re√ßu dans gamepuzzle: {...}'"

echo ""
echo "5Ô∏è‚É£ D√©pannage:"
echo "   - Si erreur 404: La session DEFAULT n'existe pas ‚Üí red√©marrer le serveur"
echo "   - Si erreur 403 WebSocket: Le joueur n'est pas dans la session ‚Üí v√©rifier l'inscription"
echo "   - Si 0 joueurs dans le chat: V√©rifier l'endpoint /sessions/DEFAULT/players"
echo "   - Si seul 1 joueur peut √©crire: V√©rifier la connexion WebSocket"

echo ""
echo "6Ô∏è‚É£ Test de connectivit√©:"
echo "   - Backend: http://localhost:8000/config"
echo "   - Session: http://localhost:8000/sessions/DEFAULT/players?pseudo=test"
echo "   - √âmojis: http://localhost:8000/players/emojis"

echo ""
echo "‚úÖ Instructions de test termin√©es !"
echo ""
echo "üéØ Prochaines √©tapes:"
echo "   1. D√©marrer le frontend"
echo "   2. Tester avec 5 joueurs"
echo "   3. V√©rifier que le chat fonctionne pour tous"
echo "   4. Signaler tout probl√®me observ√©"